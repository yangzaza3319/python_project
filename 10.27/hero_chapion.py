import time
import random

class Weapon:
    def __init__(self, name, ad):
        self.name = name
        self.ad = ad  # æ­¦å™¨æ”»å‡»åŠ›å›ºå®šï¼Œä¸éšè§’è‰²æ”¹å˜

class Gamerole:
    def __init__(self, name, ad, hp):
        self.name = name
        self.base_ad = ad  # åŸºç¡€æ”»å‡»åŠ›
        self.hp = hp
        self.weapon = None  # é»˜è®¤æ— æ­¦å™¨

    def equip_weapon(self, wea):
        self.weapon = wea

    @property
    def total_ad(self):
        """æ€»æ”»å‡»åŠ› = åŸºç¡€ + æ­¦å™¨ï¼ˆå¦‚æœæœ‰ï¼‰"""
        return self.base_ad + (self.weapon.ad if self.weapon else 0)

    def attack(self, p1):
        if p1.hp <= 0:
            return  # ä¸æ”»å‡»å·²æ­»äº¡è§’è‰²
        damage = self.total_ad
        p1.hp = max(0, p1.hp - damage)
        if self.weapon:
            print(f'{self.name}æ‰‹æŒ{self.weapon.name}æ”»å‡»{p1.name}ï¼Œ{p1.name}æ‰äº†{damage}è¡€ï¼Œè¿˜å‰©{p1.hp}è¡€')
        else:
            print(f'{self.name}æ”»å‡»{p1.name}ï¼Œ{p1.name}æ‰äº†{damage}è¡€ï¼Œè¿˜å‰©{p1.hp}è¡€')

# ===== åˆ›å»ºè§’è‰² =====
sunwukong = Gamerole("å­™æ‚Ÿç©º", 20, 500)
caocao = Gamerole("æ›¹æ“", 20, 100)
anqila = Gamerole("å®‰çªæ‹‰", 50, 80)

zhaoyun = Gamerole("èµµäº‘", 30, 450)
guanyu = Gamerole("å…³ç¾½", 80, 200)
diaochan = Gamerole("è²‚è‰", 60, 150)

# ===== åˆ›å»ºå¹¶è£…å¤‡æ­¦å™¨ =====
sunwukong.equip_weapon(Weapon("é‡‘ç®æ£’", 50))
guanyu.equip_weapon(Weapon("é’é¾™åƒæœˆåˆ€", 40))
zhaoyun.equip_weapon(Weapon("é¾™èƒ†äº®é“¶æª", 30))

blue_list = [sunwukong, caocao, anqila]
red_list = [zhaoyun, guanyu, diaochan]

# ===== æ¸¸æˆä¸»é€»è¾‘ =====
if __name__ == '__main__':
    print("æ¸¸æˆå¼€å§‹åŠ è½½")

    # ä¿®å¤è¿›åº¦æ¡ï¼š0~100ï¼Œæ­¥é•¿2
    for i in range(0, 101, 2):
        time.sleep(0.05)
        stars = '*' * (i // 2)
        if i == 100:
            print(f'\r{i}% {stars}', flush=True)
        else:
            print(f'\r{i}% {stars}', end='', flush=True)

    input("\næ¸¸æˆåŠ è½½å®Œæ¯•ï¼ŒæŒ‰ä»»æ„é”®å¼€å§‹\n")

    print("è“æ–¹é˜µè¥".center(20, '*'))
    for r in blue_list:
        print(r.name.center(20))
    print("çº¢æ–¹é˜µè¥".center(20, '*'))
    for r in red_list:
        print(r.name.center(20))

    # æˆ˜æ–—å¾ªç¯
    while blue_list and red_list:
        time.sleep(0.8)
        role1 = random.choice(blue_list)
        role2 = random.choice(red_list)

        # åªæœ‰æ´»ç€çš„è§’è‰²æ‰èƒ½æ”»å‡»
        if role1.hp > 0 and role2.hp > 0:
            role1.attack(role2)
            role2.attack(role1)

        # æ£€æŸ¥å¹¶ç§»é™¤é˜µäº¡è§’è‰²
        if role1.hp <= 0:
            print(f"ğŸ’€ {role1.name} é˜µäº¡ï¼")
            blue_list.remove(role1)
        if role2.hp <= 0:
            print(f"ğŸ’€ {role2.name} é˜µäº¡ï¼")
            red_list.remove(role2)

    # èƒœè´Ÿåˆ¤å®š
    print("\nğŸ† çº¢è‰²æ–¹èƒœåˆ©ï¼" if not blue_list else "\nğŸ† è“è‰²æ–¹èƒœåˆ©ï¼")

"""
è¾“å‡º
æ¸¸æˆå¼€å§‹åŠ è½½
100% **************************************************

æ¸¸æˆåŠ è½½å®Œæ¯•ï¼ŒæŒ‰ä»»æ„é”®å¼€å§‹

********è“æ–¹é˜µè¥********
        å­™æ‚Ÿç©º         
         æ›¹æ“         
        å®‰çªæ‹‰         
********çº¢æ–¹é˜µè¥********
         èµµäº‘         
         å…³ç¾½         
         è²‚è‰         
å®‰çªæ‹‰æ”»å‡»èµµäº‘ï¼Œèµµäº‘æ‰äº†50è¡€ï¼Œè¿˜å‰©400è¡€
èµµäº‘æ‰‹æŒé¾™èƒ†äº®é“¶æªæ”»å‡»å®‰çªæ‹‰ï¼Œå®‰çªæ‹‰æ‰äº†60è¡€ï¼Œè¿˜å‰©20è¡€
å®‰çªæ‹‰æ”»å‡»å…³ç¾½ï¼Œå…³ç¾½æ‰äº†50è¡€ï¼Œè¿˜å‰©150è¡€
å…³ç¾½æ‰‹æŒé’é¾™åƒæœˆåˆ€æ”»å‡»å®‰çªæ‹‰ï¼Œå®‰çªæ‹‰æ‰äº†120è¡€ï¼Œè¿˜å‰©0è¡€
ğŸ’€ å®‰çªæ‹‰ é˜µäº¡ï¼
æ›¹æ“æ”»å‡»è²‚è‰ï¼Œè²‚è‰æ‰äº†20è¡€ï¼Œè¿˜å‰©130è¡€
è²‚è‰æ”»å‡»æ›¹æ“ï¼Œæ›¹æ“æ‰äº†60è¡€ï¼Œè¿˜å‰©40è¡€
æ›¹æ“æ”»å‡»å…³ç¾½ï¼Œå…³ç¾½æ‰äº†20è¡€ï¼Œè¿˜å‰©130è¡€
å…³ç¾½æ‰‹æŒé’é¾™åƒæœˆåˆ€æ”»å‡»æ›¹æ“ï¼Œæ›¹æ“æ‰äº†120è¡€ï¼Œè¿˜å‰©0è¡€
ğŸ’€ æ›¹æ“ é˜µäº¡ï¼
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»å…³ç¾½ï¼Œå…³ç¾½æ‰äº†70è¡€ï¼Œè¿˜å‰©60è¡€
å…³ç¾½æ‰‹æŒé’é¾™åƒæœˆåˆ€æ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†120è¡€ï¼Œè¿˜å‰©380è¡€
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»è²‚è‰ï¼Œè²‚è‰æ‰äº†70è¡€ï¼Œè¿˜å‰©60è¡€
è²‚è‰æ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†60è¡€ï¼Œè¿˜å‰©320è¡€
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»è²‚è‰ï¼Œè²‚è‰æ‰äº†70è¡€ï¼Œè¿˜å‰©0è¡€
è²‚è‰æ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†60è¡€ï¼Œè¿˜å‰©260è¡€
ğŸ’€ è²‚è‰ é˜µäº¡ï¼
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»å…³ç¾½ï¼Œå…³ç¾½æ‰äº†70è¡€ï¼Œè¿˜å‰©0è¡€
å…³ç¾½æ‰‹æŒé’é¾™åƒæœˆåˆ€æ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†120è¡€ï¼Œè¿˜å‰©140è¡€
ğŸ’€ å…³ç¾½ é˜µäº¡ï¼
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»èµµäº‘ï¼Œèµµäº‘æ‰äº†70è¡€ï¼Œè¿˜å‰©330è¡€
èµµäº‘æ‰‹æŒé¾™èƒ†äº®é“¶æªæ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†60è¡€ï¼Œè¿˜å‰©80è¡€
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»èµµäº‘ï¼Œèµµäº‘æ‰äº†70è¡€ï¼Œè¿˜å‰©260è¡€
èµµäº‘æ‰‹æŒé¾™èƒ†äº®é“¶æªæ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†60è¡€ï¼Œè¿˜å‰©20è¡€
å­™æ‚Ÿç©ºæ‰‹æŒé‡‘ç®æ£’æ”»å‡»èµµäº‘ï¼Œèµµäº‘æ‰äº†70è¡€ï¼Œè¿˜å‰©190è¡€
èµµäº‘æ‰‹æŒé¾™èƒ†äº®é“¶æªæ”»å‡»å­™æ‚Ÿç©ºï¼Œå­™æ‚Ÿç©ºæ‰äº†60è¡€ï¼Œè¿˜å‰©0è¡€
ğŸ’€ å­™æ‚Ÿç©º é˜µäº¡ï¼

ğŸ† çº¢è‰²æ–¹èƒœåˆ©ï¼
"""